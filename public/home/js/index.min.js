window.onload = function() {
    document.getElementById("loading").style.zIndex = -1;
    document.getElementById("loading").style.opacity = 0;
    var mySwiper = new Swiper(".swiper-container", {
        loop: true,
        autoplay: 5000000,
        autoplayDisableOnInteraction: false,
        pagination: ".swiper-pagination",
        paginationType: "bullets",
        paginationClickable: true,
        preventClicks: false,
        onTransitionEnd: function(swiper) {
            if (swiper.realIndex == 0) {
                $(".third_left").addClass("slideInLeft");
                $(".third_right").addClass("fadeInUp")
            }
            if (swiper.realIndex == 1) {
                $(".first h2.wel").addClass("fadeInUp");
                $(".first p").addClass("slideInLeft");
                $(".wel span").css({
                    "-webkit-animation-name": "roll-In",
                    "animation-name": "roll-In"
                })
            }
            // if (swiper.realIndex == 2) {
            //  $(".float-tag li").addClass("fadeIn");
            //     $(".sec_center").addClass("fadeInUp")
            // }
        }
    });
    var Swipermini = new Swiper(".swiper-container-mini", {
        loop: true,
        autoplay: 5000,
        autoplayDisableOnInteraction: false,
        grabCursor: true,
        prevButton: ".arrow-left",
        nextButton: ".arrow-right",
        slidesPerView: 4,
        spaceBetween: 10,
        slidesPerGroup: 4,
        breakpoints: {
            768 : {
                slidesPerView: 2,
                spaceBetween: 20,
                slidesPerGroup: 2
            },
            480 : {
                slidesPerView: 1,
                spaceBetweenSlides: 10,
                slidesPerGroup: 1
            }
        }
    });
    var cases01 = new Swiper(".swiper-cases01", {
        slidesPerView: 4,
        slidesPerColumn: 2,
        spaceBetween: 20,
        simulateTouch: false,
        breakpoints: {
            480 : {
                slidesPerView: 1,
                slidesPerColumn: 1,
                spaceBetween: 20,
                slidesPerGroup: 1
            },
            768 : {
                slidesPerView: 2,
                slidesPerColumn: 2,
                spaceBetween: 20,
                slidesPerGroup: 2
            }
        }
    });
    var cases02 = new Swiper(".swiper-cases02", {
        slidesPerView: 4,
        slidesPerColumn: 2,
        spaceBetween: 20,
        simulateTouch: false,
        breakpoints: {
            480 : {
                slidesPerView: 1,
                slidesPerColumn: 1,
                spaceBetween: 20,
                slidesPerGroup: 1
            },
            768 : {
                slidesPerView: 2,
                slidesPerColumn: 2,
                spaceBetween: 20,
                slidesPerGroup: 2
            }
        }
    });
    var cases03 = new Swiper(".swiper-cases03", {
        slidesPerView: 4,
        slidesPerColumn: 2,
        spaceBetween: 20,
        simulateTouch: false,
        breakpoints: {
            480 : {
                slidesPerView: 1,
                slidesPerColumn: 1,
                spaceBetween: 20,
                slidesPerGroup: 1
            },
            768 : {
                slidesPerView: 2,
                slidesPerColumn: 2,
                spaceBetween: 20,
                slidesPerGroup: 2
            }
        }
    });
    var cases04 = new Swiper(".swiper-cases04", {
        slidesPerView: 4,
        slidesPerColumn: 2,
        spaceBetween: 20,
        simulateTouch: false,
        breakpoints: {
            480 : {
                slidesPerView: 1,
                slidesPerColumn: 1,
                spaceBetween: 20,
                slidesPerGroup: 1
            },
            768 : {
                slidesPerView: 2,
                slidesPerColumn: 2,
                spaceBetween: 20,
                slidesPerGroup: 2
            }
        }
    });
    $("#page").fullpage({
        verticalCentered: 0,
        navigation: 1,
        navigationPosition: 1,
        scrollingSpeed: 500,
        slidesNavigation: true,
        controlArrows: false,
        loopHorizontal: true,
        afterLoad: function(anchorLink, index) {
            if (index == 1) {
                mySwiper.startAutoplay()
            }
            if (index == 2) {
                $(".service_list>li").addClass("bid")
            }
            if (index == 3) {
                $(".cases_block").addClass("fadeInUp")
            }
            if (index == 4) {
                $(".client_list .left").addClass("fadeInLeft");
                $(".client_list .right").addClass("fadeInRight")
            }
            if (index == 5) {
                $(".introduce").addClass("bounceInDown");
                $(".honor").addClass("bounceInLeft");
                $(".down_center").addClass("bounceInRight")
            }
            if (index == 6) {
                $(".about_left").addClass("fadeInRight");
                $(".about_right").addClass("fadeInUp");
                $(".center_tips .mouse").css("opacity", "0");
                $(".center_tips .back").css({
                    "opacity": "1",
                    "z-index": "160"
                })
            } else {
                $(".center_tips .mouse").css("opacity", "1");
                $(".center_tips .back").css({
                    "opacity": "0",
                    "z-index": "140"
                })
            }
        }
    });
    function autoScrolling() {
        $.fn.fullpage.setAutoScrolling(true)
    }
    autoScrolling();
    var wh = $(window).height();
    $(".first").height($(window).height());
    $(".second").height($(window).height());
    $(".third").height($(window).height());
    var ih = $(".f_center").height();
    $(".f_center").css({
        "margin-top": (wh - ih) / 2
    });
    var sch = $(".sec_center").height();
    $(".sec_center").css({
        "margin-top": (wh - sch) / 2
    });
    var tch = $(".third_center").height();
    $(".third_center").css({
        "margin-top": (wh - tch) / 2
    });
    var th = $(".title_team").height();
    $(".title_team").css({
        "margin-top": (wh - th) / 2
    });
    var sh = $(".service").height();
    $(".service").css({
        "top": (wh - sh) / 2
    });
    var mh = $(".banner_05 .main").height();
    $(".banner_05 .main").css({
        "margin-top": (wh - mh) / 2
    });
    $(window).resize(function() {
        $(".first").height($(window).height());
        $(".second").height($(window).height());
        $(".third").height($(window).height());
        var wh = $(window).height();
        var ih = $(".f_center").height();
        $(".f_center").css({
            "margin-top": (wh - ih) / 2
        });
        var sch = $(".sec_center").height();
        $(".sec_center").css({
            "margin-top": (wh - sch) / 2
        });
        var tch = $(".third_center").height();
        $(".third_center").css({
            "margin-top": (wh - tch) / 2
        });
        var th = $(".title_team").height();
        $(".title_team").css({
            "margin-top": (wh - th) / 2
        });
        var sh = $(".service").height();
        $(".service").css({
            "top": (wh - sh) / 2
        });
        var mh = $(".banner_05 .main").height();
        $(".banner_05 .main").css({
            "margin-top": (wh - mh) / 2
        })
    })
};
function backTop() {
    $.fn.fullpage.moveTo(1)
}
$(function() {
    $(".client_list").mouseover(function() {
        $(".move_bg").show()
    });
    $(".client_list").mouseleave(function() {
        $(".move_bg").hide()
    });
    $(".client_list>li").mouseover(function() {
        var ltop = $(this).offset().top;
        var lleft = $(this).offset().left;
        var ctop = $(".client_list").offset().top;
        var cleft = $(".client_list").offset().left;
        var top = ltop - ctop;
        var left = lleft - cleft;
        $(".move_bg").css({
            "top": top + "px",
            "left": left + "px"
        })
    });
    $(".title_img a").click(function() {
        var num = $(this).data("num");
        $(".cases_block .swiper-wrapper").css("display", "flex");
        $(".cases_box>div").hide();
        $(".box_" + num).show();
        $(".title_img li").removeClass("active");
        $(this).parent().addClass("active")
    });
    $("#contact-form").submit(function(event) {
        var attrs =  $("#contact-form").attr('action'); 
        // console.info(attrs);
        event.preventDefault();
        var msg = "";
        if (!$("input[name=nickname]").val()) {
            msg += "请输入您的姓名" + "<br/>"
        } else {
            if (!$("input[name=nickname]").val().match(/^.{1,10}$/)) {
                msg += "姓名不能超过10个字符" + "<br/>"
            }
        }
        if (!$("input[name=contact]").val()) {
            msg += "请输入您的联系方式" + "<br/>"
        } else {
            if (!$("input[name=contact]").val().match(/^.{1,50}$/)) {
                msg += "联系方式不能超过50个字符" + "<br/>"
            }
        }
        if (!$("textarea[name=content]").val()) {
            msg += "请输入您的需求或者建议" + "<br/>"
        } else {
            if (!$("textarea[name=content]").val().match(/^.{1,150}$/)) {
                msg += "需求或者建议不能超过150个字符" + "<br/>"
            }
        }
        if (msg) {
            showMessage(msg, "error")
        } else {
            $.post(attrs, {
                "nickname": $("input[name=nickname]").val(),
                "contact": $("input[name=contact]").val(),
                "content": $("textarea[name=content]").val()
            },
            function(data) {
                // alert(11);
                // console.info(data);
                if (data.code>0) {
                    showMessage(data.msg);
                    $("#contact-form")[0].reset()
                } else {
                    showMessage(data.msg, "error") 
                }
            },'json')
        }
        return false
    });
    function msgbox(tit, msg) {
        $(".cover .msg h4").text(tit);
        $(".cover .msg p").text(msg);
        $(".cover").show()
    }
    function showMessage(msg, type, tit) {
        if (type == "error") {
            layer.open({
                title: [tit || "出错啦", "background-color: #f00; color: #fff;"],
                content: msg,
                style: "background-color: #fff; color: #666; min-width: 50%;",
                btn: ["确定"]
            })
        } else {
            if (type == "info") {
                layer.open({
                    title: [tit || "提示", "background-color: #f6f6f6; color: #666;"],
                    content: msg,
                    style: "background-color: #fff; color: #666; min-width: 50%;",
                    btn: ["确定"]
                })
            } else {
                layer.open({
                    content: msg,
                    time: 20000
                })
            }
        }
    }
});